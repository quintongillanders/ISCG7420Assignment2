{"ast":null,"code":"const handleSubmit = async e => {\n  e.preventDefault();\n  setError('');\n  try {\n    // First, get the authentication token\n    const tokenResponse = await axios.post('http://localhost:8000/api/token/', {\n      username: username,\n      password: password\n    });\n\n    // Then get the user's information\n    const userResponse = await axios.get('http://localhost:8000/api/users/me/', {\n      headers: {\n        'Authorization': `Bearer ${tokenResponse.data.access}`\n      }\n    });\n\n    // Store tokens and user info\n    localStorage.setItem('access_token', tokenResponse.data.access);\n    localStorage.setItem('refresh_token', tokenResponse.data.refresh);\n    localStorage.setItem('user_id', userResponse.data.id);\n\n    // Set default auth header for future requests\n    axios.defaults.headers.common['Authorization'] = `Bearer ${tokenResponse.data.access}`;\n    navigate('/');\n  } catch (err) {\n    console.error(err.response ? err.response.data : err);\n    setError('Login failed. Incorrect username or password');\n  }\n};","map":{"version":3,"names":["handleSubmit","e","preventDefault","setError","tokenResponse","axios","post","username","password","userResponse","get","headers","data","access","localStorage","setItem","refresh","id","defaults","common","navigate","err","console","error","response"],"sources":["C:/Users/GGPC/Desktop/GitUploads/ISCG7420Assignment2/conference-app/frontend/src/components/Login.js"],"sourcesContent":["  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    try {\r\n      // First, get the authentication token\r\n      const tokenResponse = await axios.post('http://localhost:8000/api/token/', {\r\n        username: username,\r\n        password: password\r\n      });\r\n\r\n      // Then get the user's information\r\n      const userResponse = await axios.get('http://localhost:8000/api/users/me/', {\r\n        headers: {\r\n          'Authorization': `Bearer ${tokenResponse.data.access}`\r\n        }\r\n      });\r\n\r\n      // Store tokens and user info\r\n      localStorage.setItem('access_token', tokenResponse.data.access);\r\n      localStorage.setItem('refresh_token', tokenResponse.data.refresh);\r\n      localStorage.setItem('user_id', userResponse.data.id);\r\n      \r\n      // Set default auth header for future requests\r\n      axios.defaults.headers.common['Authorization'] = `Bearer ${tokenResponse.data.access}`;\r\n\r\n      navigate('/');\r\n    } catch (err) {\r\n      console.error(err.response ? err.response.data : err);\r\n      setError('Login failed. Incorrect username or password');\r\n    }\r\n  };\r\n"],"mappings":"AAAE,MAAMA,YAAY,GAAG,MAAOC,CAAC,IAAK;EAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;EAClBC,QAAQ,CAAC,EAAE,CAAC;EAEZ,IAAI;IACF;IACA,MAAMC,aAAa,GAAG,MAAMC,KAAK,CAACC,IAAI,CAAC,kCAAkC,EAAE;MACzEC,QAAQ,EAAEA,QAAQ;MAClBC,QAAQ,EAAEA;IACZ,CAAC,CAAC;;IAEF;IACA,MAAMC,YAAY,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAC,qCAAqC,EAAE;MAC1EC,OAAO,EAAE;QACP,eAAe,EAAE,UAAUP,aAAa,CAACQ,IAAI,CAACC,MAAM;MACtD;IACF,CAAC,CAAC;;IAEF;IACAC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEX,aAAa,CAACQ,IAAI,CAACC,MAAM,CAAC;IAC/DC,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEX,aAAa,CAACQ,IAAI,CAACI,OAAO,CAAC;IACjEF,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEN,YAAY,CAACG,IAAI,CAACK,EAAE,CAAC;;IAErD;IACAZ,KAAK,CAACa,QAAQ,CAACP,OAAO,CAACQ,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUf,aAAa,CAACQ,IAAI,CAACC,MAAM,EAAE;IAEtFO,QAAQ,CAAC,GAAG,CAAC;EACf,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAACG,QAAQ,GAAGH,GAAG,CAACG,QAAQ,CAACZ,IAAI,GAAGS,GAAG,CAAC;IACrDlB,QAAQ,CAAC,8CAA8C,CAAC;EAC1D;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}